<?xml version="1.0" encoding="UTF-8"?>
<project name="Harel" default="Total" basedir=".">
<!-- Set user properties  Important(!!!) each programmer sholud change this variables-->
<property name="currentProject" value="FWPilotWeb" />
<property name="frameWorkProject" value="FWWeb"/>
<property name="fwCore" value="FWCore"/>


<!-- Set global properties -->
<property name="jar" value="fw" />
<property name="type" value="full" />
<property name="debug" value="false" />
<property name="basePath" location=".." />
<property name="temp" value="temp"></property>

<target name="init">
	<!-- Create the time stamp -->
	<tstamp />
</target>

<target name="buildCurrent">
	<!-- Builds the common project -->
	<projectBuild ProjectName="${currentProject}" BuildType="${type}"
	DebugCompilation="${debug}" />
</target>

<target name="exportFrameWork" depends="init">
	<mkdir dir="${temp}"/>
	<!-- Exports the fw -->
	<jar jarfile="${temp}/${jar}.jar">
	    <fileset dir="${basePath}/${fwCore}/classes">
	    	<include name="**/*.class"/>
	    	<include name="**/*.properties"/>
	    </fileset>
	    <fileset dir="${basePath}/${frameWorkProject}/config/dtd"/>
	</jar>
</target>

<target name="copyResources">
	<!-- copy properties files -->
	<copy todir="JavaSource\resLib">
 
		<fileset dir="${basePath}\${frameWorkProject}\resources\localized\output">
    		<include name="**/*.properties"/>
		</fileset>
 
    	<!-- <fileset dir="${basePath}\${frameWorkProject}\resources\persistence">
    		<include name="**/*.properties"/>
	    </fileset> -->
 
	 	 <fileset dir="${basePath}\${frameWorkProject}\resources\batch">
	   		<include name="**/*.properties"/>
	    </fileset>
	 
    	<fileset dir="${basePath}\${frameWorkProject}\resources\ui">
	    	<include name="**/*.properties"/>
	    </fileset>    

 	   <fileset dir="${basePath}\${frameWorkProject}\resources\system">
    		<include name="**/*.properties"/>
	    </fileset>    

	    <fileset dir="${basePath}\${frameWorkProject}\resources\workflow">
	    	<include name="**/*.properties"/>
	    </fileset>

	</copy>

	<!-- copy tld to web-inf\tld folder -->
	<copy file="${basePath}\${frameWorkProject}\WebContent\WEB-INF\tld\taglib.tld" todir="WebContent/WEB-INF/tld"/> 

	<!-- copy javascript -->
	<copy todir="WebContent/scripts/">
	    <fileset dir="${basePath}\${frameWorkProject}\WebContent\scripts">
	    	<include name="**/*.js"/>
	    </fileset>
	</copy>

	<!-- copy html -->
	<copy todir="WebContent/html/">
	    <fileset dir="${basePath}\${frameWorkProject}\WebContent\html">
	    	<include name="**/*.html"/>
	    </fileset>
	</copy>
	
	<!-- copy images -->
	<copy todir="WebContent/images/">
	    <fileset dir="${basePath}\${frameWorkProject}\WebContent\images"/>
	</copy>

	<!-- copy theme -->
	<copy todir="WebContent/theme/">
    	<fileset dir="${basePath}\${frameWorkProject}\WebContent\theme"/>
	</copy>

	<!-- copy jsp -->
	<copy todir="WebContent/jsp/">
		<fileset dir="${basePath}\${frameWorkProject}\WebContent\jsp"/>
	</copy>


	<!-- copy xml to conf folder -->
	<copy todir="javasource\config" >
    	<fileset dir="${basePath}\${frameWorkProject}\config">
    		<exclude name="*.xml"/>
    	</fileset>
	</copy>

	<copy todir="javasource\config"  >
		<fileset dir="config">
			<include name="*.xml"/>
		</fileset>
	</copy>

	<!-- copy jar to the lib folder -->
	<copy file="${temp}/${jar}.jar" todir="WebContent\WEB-INF\lib"/>
	
</target>

<target name="clean">
	<!-- delete the jar -->
	<delete dir="${temp}"></delete>
</target>

<target name="Total" depends="exportFrameWork,copyResources,clean">
<!-- Buidl all projects and exports all files -->
<echo message="Total finished" />
</target>

</project>
<html>
<head>
<link href="..\theme\system.css" rel="stylesheet" type="text/css">
<script src="..\scripts\UIConstants.js"></script>
<script src="../scripts/UIUtil.js"></script>
<script>
document.write("<title>"  + getDialogFixedTitle(window.dialogArguments["parentWindow"].WARNINGS_LABELS[3]) + "</title>");

function init()
{
	var parameters = window.dialogArguments;
	var parentWindow = parameters["parentWindow"];
	var parentDocument = parameters["parentWindow"].document;
	document.body.dir = parentDocument.body.dir;
	var labels = parameters["parentWindow"].WARNINGS_LABELS;
	var parentErrorContainer = parentDocument.all.errorContainer 
	var messageAreaHtml = parentErrorContainer.outerHTML;
	
	//buttons labels
	cancelButton.value = parentWindow.WARNINGS_LABELS[0];
	approveButton.value = parentWindow.WARNINGS_LABELS[1];
	
	//warning alert
	alertCell.innerHTML = parentWindow.WARNINGS_LABELS[2];
	
	//warning messages
	messagesCell.innerHTML = messageAreaHtml;

	//images src
	var images = document.images;
	for (index = 0;index < images.length;index++)
	{
		images[index].src = "../" + images[index].src.substring(images[index].src.indexOf("images"));
	}

}
function submitParent()
{
	var parameters = window.dialogArguments;
	var lastEventName = parameters["lastEventName"];
	var lastFlowPath = parameters["lastFlowPath"];
	var lastFlowState = parameters["lastFlowState"];	
	var parentForm = parameters["parentWindow"].document.forms[0];
	parentForm[FORM_FIELD_EVENT_NAME].value = lastEventName + WARNING_EVENT_SUFFIX;
	parentForm[FORM_FIELD_FLOW_ID].value    = lastFlowPath;
	parentForm[FORM_FIELD_FLOW_STATE].value = lastFlowState;
	parentForm.submit();
	self.close();
}
function showField()
{

}
</script>
</head>
<body onload="init()"  class="bodyDialog">
<table width="100%" height="100%" cellpadding="0" cellspacing="0">
	<tr height="1">
		<td class="popupMainLayout" align="center" >
			<table height="100%" width="100%">
				<tr>
					<td height="1" id="alertCell" class="label"></td>
				</tr>
				<tr>
					<td height="100" width="100%" id="messagesCell"></td>
				</tr>
				<tr>
					<td align="center" height="1">
						<input type="button" id="approveButton" class="buttonEnabled" onclick="submitParent()">
						<input type="button" id="cancelButton" class="buttonEnabled" onclick="self.close()">
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</body>
</html>